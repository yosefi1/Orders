# מדריך הרצה מקומית - מערכת הזמנות קפיטריה

## שלבים להרצת האפליקציה מקומית

### שלב 1: התקנת תלויות (Dependencies)

אם עדיין לא התקנת את התלויות, או אם הוספת תלויות חדשות:

```bash
npm install
```

### שלב 2: הגדרת משתני סביבה

צור קובץ `.env.local` בתיקיית הפרויקט עם המשתנים הבאים:

```env
# חיבור למסד הנתונים (Vercel Postgres או Neon)
DATABASE_URL=your_database_connection_string_here

# הגדרות אימייל (אופציונלי - רק אם אתה רוצה לבדוק שליחת אימיילים)
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your_email@gmail.com
SMTP_PASSWORD=your_app_password
SUPPLIER_EMAIL=supplier@example.com

# מפתח אבטחה ל-Cron Jobs (אופציונלי - רק אם אתה רוצה לבדוק cron)
CRON_SECRET=your_random_secret_string_here
```

**הערות חשובות:**
- `DATABASE_URL` - **חובה** - צריך חיבור למסד נתונים (Vercel Postgres או Neon)
- משתני האימייל - **אופציונלי** - נדרשים רק אם אתה רוצה לבדוק שליחת דוחות יומיים
- `CRON_SECRET` - **אופציונלי** - נדרש רק אם אתה רוצה לבדוק את ה-cron job

**איך להשיג DATABASE_URL:**
1. אם יש לך מסד נתונים ב-Vercel:
   - לך ל-Vercel Dashboard → הפרויקט שלך → Storage → מסד הנתונים
   - לחץ על "Settings" → "Connection String"
   - העתק את ה-connection string

2. אם יש לך מסד נתונים ב-Neon:
   - לך ל-Neon Dashboard → הפרויקט שלך
   - העתק את ה-connection string

### שלב 3: הרצת שרת הפיתוח

```bash
npm run dev
```

האפליקציה תרוץ על: **http://localhost:3000**

### שלב 4: בדיקה שהכל עובד

1. פתח את הדפדפן ונווט ל-`http://localhost:3000`
2. בדוק שהתפריט נטען (אם יש נתונים במסד הנתונים)
3. נסה להוסיף פריטים לעגלה
4. נסה לבצע הזמנה

## פתרון בעיות נפוצות

### הבעיה: "DATABASE_URL not configured"
**פתרון:** ודא שיצרת קובץ `.env.local` עם משתנה `DATABASE_URL` תקין

### הבעיה: התפריט לא נטען
**פתרונות:**
- בדוק שהחיבור למסד הנתונים תקין
- ודא שרצת את ה-SQL schema במסד הנתונים (ראה `database/schema.sql` או `database/schema-updated.sql`)
- בדוק את ה-console בדפדפן ובטרמינל לשגיאות

### הבעיה: שגיאת port כבר בשימוש
**פתרון:** אם פורט 3000 תפוס, Next.js יבחר פורט אחר אוטומטית (3001, 3002 וכו'). בדוק את ההודעה בטרמינל.

### הבעיה: שגיאות TypeScript
**פתרון:** הרץ:
```bash
npm run lint
```

## פקודות נוספות

```bash
# בניית האפליקציה לייצור
npm run build

# הרצת גרסת ייצור מקומית (אחרי build)
npm start

# בדיקת שגיאות קוד
npm run lint
```

## הערות חשובות

- **קובץ `.env.local`** לא צריך להיות ב-git (הוא כבר ב-.gitignore)
- **מסד הנתונים** הוא בענן - לא צריך להריץ שרת מקומי
- **שינויים בקוד** יתעדכנו אוטומטית בשרת הפיתוח (Hot Reload)

