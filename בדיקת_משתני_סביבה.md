# איך לבדוק את המשתנים ב-Vercel

## שלב 1: בדוק את המשתנים

1. לך ל-Vercel → הפרויקט שלך
2. לחץ על **Settings** (הגדרות)
3. לחץ על **Environment Variables** בתפריט השמאלי
4. בדוק שיש לך את כל המשתנים הבאים:

### רשימת משתנים חובה:

- ✅ `SMTP_HOST` = `smtp.gmail.com`
- ✅ `SMTP_PORT` = `587`
- ⚠️ `SMTP_USER` = `your-email@gmail.com` (המייל שלך)
- ⚠️ `SMTP_PASSWORD` = `[16 תווים]` (ה-App Password)
- ✅ `EMAIL_FROM` = `your-email@gmail.com`
- ✅ `SUPPLIER_EMAIL` = `[מייל הספק]`

### אם חסר משתנה:
1. לחץ **Add New**
2. הזן את ה-Key וה-Value
3. ודא שבחרת **Production, Preview, Development** (כל שלושת)
4. לחץ **Save**

---

## שלב 2: בדוק את ה-Logs

1. לך ל-Vercel → **Deployments**
2. לחץ על ה-Deployment האחרון (הראשון ברשימה)
3. לחץ על **Functions** (בתפריט העליון)
4. לחץ על `/api/orders/send-confirmation`
5. לחץ על **Logs** (בתפריט העליון)

### מה לחפש ב-Logs:

תראה שם משהו כמו:
```
SMTP Config: {
  host: 'smtp.gmail.com',
  port: '587',
  hasUser: false,  ← אם זה false, המשתנה לא נמצא!
  hasPassword: false,  ← אם זה false, המשתנה לא נמצא!
  userLength: 0,  ← אם זה 0, המשתנה ריק!
  passwordLength: 0,  ← אם זה 0, המשתנה ריק!
  ...
}
```

### אם `hasUser: false` או `hasPassword: false`:
- המשתנים לא נמצאים ב-Vercel
- או שהם לא נטענו אחרי ה-Redeploy

---

## שלב 3: פתרון

### אם המשתנים לא קיימים:
1. הוסף אותם שוב (כמו בשלב 1)
2. לחץ **Save**
3. לך ל-Deployments → Redeploy

### אם המשתנים קיימים אבל לא עובדים:
1. מחק את המשתנים הישנים
2. לחץ **Save**
3. הוסף אותם שוב (חדש)
4. לחץ **Save**
5. לך ל-Deployments → Redeploy

### טיפ חשוב:
אחרי כל שינוי ב-Environment Variables, **חובה** לעשות Redeploy!

---

## שלב 4: בדיקה סופית

אחרי ה-Redeploy:
1. נסה שוב לבצע הזמנה
2. בדוק את ה-Logs שוב
3. עכשיו אמור להיות:
   ```
   hasUser: true,
   hasPassword: true,
   userLength: [מספר גדול מ-0],
   passwordLength: 16,  ← צריך להיות 16 תווים!
   ```

---

## שאלות נפוצות

**Q: איך אני יודע אם המשתנים נשמרו?**
A: אחרי Save, הם אמורים להופיע ברשימה. אם הם לא מופיעים, הם לא נשמרו.

**Q: למה צריך Redeploy?**
A: Vercel טוען את המשתנים רק בזמן ה-Deployment. שינויים במשתנים לא נטענים אוטומטית.

**Q: איך אני יודע אם ה-Redeploy הצליח?**
A: לך ל-Deployments ותראה שה-Deployment החדש הושלם (ירוק).

---

**שלח לי את מה שאתה רואה ב-Logs ואני אעזור לך לתקן!**

